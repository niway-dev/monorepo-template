---
title: Bounded Contexts - Complete Architecture Guide
description: Comprehensive guide to organizing packages per bounded context with full DDD implementation
---

# Bounded Contexts - Complete Architecture Guide

This is the **complete guide** to implementing Bounded Contexts in a monorepo, covering package structure, layers, integration patterns, and real-world examples.

---

## ğŸ¯ What is a Bounded Context?

A **Bounded Context** is an explicit boundary within which a particular domain model applies. It's a logical division of your business domain where:

- ğŸ”¹ Terms have specific meanings
- ğŸ”¹ Models are self-contained
- ğŸ”¹ Rules are enforced
- ğŸ”¹ Teams can work independently

### Example: "User" in Different Contexts

```typescript
// Your Context
class ContextUser {
  createEntity()
  trackEntityStatus()
  uploadDocument()
}

// Analytics Context
class AnalyticsUser {
  getActivityMetrics()
  calculateEngagement()
}

// Billing Context
class SubscriptionUser {
  subscribeToPlan()
  processPayment()
  checkUsageLimit()
}
```

**Same entity, different meanings in each context!**

---

## ğŸ“¦ Complete Package Structure Per Context

### Full Monorepo Architecture

```bash
monorepo-template/                              # Monorepo root
â”œâ”€â”€ apps/                                 # Applications
â”‚   â”œâ”€â”€ web/                              # Frontend app
â”‚   â”œâ”€â”€ server/                           # Backend API
â”‚   â””â”€â”€ fumadocs/                         # Documentation
â”‚
â”œâ”€â”€ packages/                             # Shared packages
â”‚   â”œâ”€â”€ shared-kernel/                    # â† Shared primitives
â”‚   â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”‚   â”œâ”€â”€ api.ts                    # ApiResponse, Pagination
â”‚   â”‚   â”‚   â”œâ”€â”€ currency.ts               # Currency constants
â”‚   â”‚   â”‚   â”œâ”€â”€ result.ts                 # Result<T, E> pattern
â”‚   â”‚   â”‚   â”œâ”€â”€ utils.ts                  # TypeScript utilities
â”‚   â”‚   â”‚   â””â”€â”€ index.ts
â”‚   â”‚   â”œâ”€â”€ package.json
â”‚   â”‚   â””â”€â”€ tsconfig.json
â”‚   â”‚
â”‚   â”œâ”€â”€ your-context/                     # â† Your Bounded Context
â”‚   â”‚   â”œâ”€â”€ domain/                       # Domain layer
â”‚   â”‚   â”‚   â”œâ”€â”€ entities/
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ your-entity.entity.ts
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ comment.entity.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ value-objects/
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ priority.ts
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ title.ts
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ entity-status.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ repositories/             # Interfaces only
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ your-entity.repository.ts
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ comment.repository.ts
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ index.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ services/                 # Domain services
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ status-transition.service.ts
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ priority-calculator.service.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ events/                   # Domain events
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ your-entity-created.event.ts
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ status-changed.event.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ constants/
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ entity-status.ts
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ comment-type.ts
â”‚   â”‚   â”‚   â””â”€â”€ index.ts
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ application/                  # Application layer (Use Cases)
â”‚   â”‚   â”‚   â”œâ”€â”€ use-cases/
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ create-your-entity/
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ create-your-entity.command.ts
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ create-your-entity.handler.ts
â”‚   â”‚   â”‚   â”‚   â”‚   â””â”€â”€ index.ts
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ update-status/
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ update-status.command.ts
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ update-status.handler.ts
â”‚   â”‚   â”‚   â”‚   â”‚   â””â”€â”€ index.ts
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ add-comment/
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ list-your-entities/
â”‚   â”‚   â”‚   â”œâ”€â”€ queries/
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ get-your-entity.query.ts
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ get-entity-list.query.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ dto/
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ create-your-entity.dto.ts
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ your-entity-response.dto.ts
â”‚   â”‚   â”‚   â””â”€â”€ index.ts
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ infrastructure/               # Infrastructure layer
â”‚   â”‚   â”‚   â”œâ”€â”€ persistence/
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ repositories/
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ your-entity.repository.drizzle.ts
â”‚   â”‚   â”‚   â”‚   â”‚   â””â”€â”€ comment.repository.drizzle.ts
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ mappers/
â”‚   â”‚   â”‚   â”‚       â”œâ”€â”€ your-entity.mapper.ts
â”‚   â”‚   â”‚   â”‚       â””â”€â”€ comment.mapper.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ events/
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ event-publisher.ts
â”‚   â”‚   â”‚   â””â”€â”€ index.ts
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ package.json                  # Context-specific dependencies
â”‚   â”‚   â””â”€â”€ tsconfig.json
â”‚   â”‚
â”‚   â”œâ”€â”€ analytics/                        # â† Analytics Bounded Context
â”‚   â”‚   â”œâ”€â”€ domain/
â”‚   â”‚   â”‚   â”œâ”€â”€ entities/
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ entity-metric.entity.ts
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ user-activity.entity.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ repositories/
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ metrics.repository.ts
â”‚   â”‚   â”‚   â””â”€â”€ index.ts
â”‚   â”‚   â”œâ”€â”€ application/
â”‚   â”‚   â”‚   â”œâ”€â”€ queries/
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ get-success-rate.query.ts
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ get-time-to-complete.query.ts
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ get-status-distribution.query.ts
â”‚   â”‚   â”‚   â””â”€â”€ index.ts
â”‚   â”‚   â”œâ”€â”€ infrastructure/
â”‚   â”‚   â”‚   â””â”€â”€ persistence/
â”‚   â”‚   â”‚       â””â”€â”€ repositories/
â”‚   â”‚   â”‚           â””â”€â”€ metrics.repository.drizzle.ts
â”‚   â”‚   â””â”€â”€ package.json
â”‚   â”‚
â”‚   â”œâ”€â”€ billing/                          # â† Billing Bounded Context
â”‚   â”‚   â”œâ”€â”€ domain/
â”‚   â”‚   â”‚   â”œâ”€â”€ entities/
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ subscription.entity.ts
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ payment.entity.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ value-objects/
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ plan.ts
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ usage-limit.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ repositories/
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ subscription.repository.ts
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ payment.repository.ts
â”‚   â”‚   â”‚   â””â”€â”€ index.ts
â”‚   â”‚   â”œâ”€â”€ application/
â”‚   â”‚   â”‚   â”œâ”€â”€ use-cases/
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ subscribe-to-plan/
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ process-payment/
â”‚   â”‚   â”‚   â””â”€â”€ index.ts
â”‚   â”‚   â”œâ”€â”€ infrastructure/
â”‚   â”‚   â”‚   â”œâ”€â”€ persistence/
â”‚   â”‚   â”‚   â””â”€â”€ payment-providers/
â”‚   â”‚   â”‚       â””â”€â”€ stripe.adapter.ts
â”‚   â”‚   â””â”€â”€ package.json
â”‚   â”‚
â”‚   â”œâ”€â”€ integration/                      # â† Integration layer (Context â†’ Context)
â”‚   â”‚   â”œâ”€â”€ your-context-api/             # Public API for Your context
â”‚   â”‚   â”‚   â”œâ”€â”€ dto/
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ your-entity.dto.ts
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ your-entity-summary.dto.ts
â”‚   â”‚   â”‚   â””â”€â”€ index.ts
â”‚   â”‚   â”œâ”€â”€ analytics-api/                # Public API for Analytics context
â”‚   â”‚   â”‚   â”œâ”€â”€ dto/
â”‚   â”‚   â”‚   â””â”€â”€ index.ts
â”‚   â”‚   â””â”€â”€ package.json
â”‚   â”‚
â”‚   â”œâ”€â”€ database/                         # â† Shared database infrastructure
â”‚   â”‚   â”œâ”€â”€ schema/                       # Drizzle table definitions
â”‚   â”‚   â”‚   â”œâ”€â”€ your-entity.schema.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ comment.schema.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ subscription.schema.ts
â”‚   â”‚   â”‚   â””â”€â”€ index.ts
â”‚   â”‚   â”œâ”€â”€ client/
â”‚   â”‚   â”‚   â””â”€â”€ index.ts
â”‚   â”‚   â””â”€â”€ package.json
â”‚   â”‚
â”‚   â””â”€â”€ web-ui/                           # â† Shared UI components
â”‚       â””â”€â”€ components/
â”‚
â”œâ”€â”€ package.json                          # Root package.json
â””â”€â”€ bun.lockb
```

---

## ğŸ—ï¸ Layers Within Each Context

Each bounded context follows **Clean Architecture** with distinct layers:

### 1. Domain Layer (Core Business Logic)

**What goes here:**

- âœ… Entities with business behavior
- âœ… Value Objects with invariants
- âœ… Domain Services for business rules
- âœ… Repository Interfaces
- âœ… Domain Events
- âœ… Domain Exceptions

**What DOESN'T go here:**

- âŒ Database queries
- âŒ HTTP requests
- âŒ Framework dependencies
- âŒ UI logic

**Example:**

```typescript
// packages/your-context/domain/entities/your-entity.entity.ts
import { YourEntityStatus } from "../value-objects/entity-status";
import { Priority } from "../value-objects/priority";
import { YourEntityCreatedEvent } from "../events/your-entity-created.event";

export class YourEntity {
  private constructor(
    public readonly id: string,
    private title: string,
    private status: YourEntityStatus,
    private priority: Priority | null,
    private comments: Comment[],
  ) {}

  static create(data: { title: string; priority?: Priority }): YourEntity {
    const entity = new YourEntity(
      crypto.randomUUID(),
      data.title,
      YourEntityStatus.draft(),
      data.priority ?? null,
      [],
    );

    // Domain event
    entity.raise(new YourEntityCreatedEvent(entity.id, data.title));

    return entity;
  }

  // Business logic - status transitions
  updateStatus(newStatus: YourEntityStatus): void {
    if (!this.status.canTransitionTo(newStatus)) {
      throw new InvalidStatusTransitionError(this.status, newStatus);
    }
    this.status = newStatus;
  }

  // Business logic - add comment
  addComment(comment: Comment): void {
    if (!this.isActive()) {
      throw new Error("Cannot add comment to closed entity");
    }
    this.comments.push(comment);
  }

  isActive(): boolean {
    return this.status.isActive();
  }
}
```

---

### 2. Application Layer (Use Cases / Orchestration)

**What goes here:**

- âœ… Use Case handlers (Commands/Queries)
- âœ… Application Services
- âœ… DTOs (Data Transfer Objects)
- âœ… Input validation
- âœ… Transaction orchestration

**What DOESN'T go here:**

- âŒ Business rules (go in domain)
- âŒ Database implementation
- âŒ HTTP routing

**Example:**

```typescript
// packages/your-context/application/use-cases/create-your-entity/create-your-entity.handler.ts
import type { IYourEntityRepository } from "@monorepo-template/your-context/domain";
import { YourEntity } from "@monorepo-template/your-context/domain";
import { Priority } from "@monorepo-template/your-context/domain/value-objects";
import type { CreateYourEntityCommand } from "./create-your-entity.command";

export class CreateYourEntityHandler {
  constructor(
    private readonly yourEntityRepo: IYourEntityRepository,
    private readonly eventPublisher: IEventPublisher,
  ) {}

  async execute(command: CreateYourEntityCommand): Promise<string> {
    // 1. Create domain entity (business logic in domain)
    const priority = command.priority
      ? Priority.create(command.priority)
      : null;

    const yourEntity = YourEntity.create({
      title: command.title,
      priority,
    });

    // 2. Persist using repository
    await this.yourEntityRepo.save(yourEntity);

    // 3. Publish domain events
    await this.eventPublisher.publish(yourEntity.getDomainEvents());

    // 4. Return result
    return yourEntity.id;
  }
}
```

---

### 3. Infrastructure Layer (Technical Implementation)

**What goes here:**

- âœ… Repository implementations
- âœ… ORM/Database code
- âœ… External API adapters
- âœ… File system operations
- âœ… Email/SMS services

**What DOESN'T go here:**

- âŒ Business logic
- âŒ Use case orchestration

**Example:**

```typescript
// packages/your-context/infrastructure/persistence/repositories/your-entity.repository.drizzle.ts
import type { IYourEntityRepository } from "@monorepo-template/your-context/domain";
import type { YourEntity } from "@monorepo-template/your-context/domain";
import { YourEntityMapper } from "../mappers/your-entity.mapper";
import { db } from "@monorepo-template/database/client";

export class YourEntityRepositoryDrizzle implements IYourEntityRepository {
  async save(yourEntity: YourEntity): Promise<void> {
    const data = YourEntityMapper.toPersistence(yourEntity);
    await db.insert(yourEntityTable).values(data);
  }

  async findById(id: string): Promise<YourEntity | null> {
    const row = await db.query.yourEntityTable.findFirst({
      where: eq(yourEntityTable.id, id),
    });

    return row ? YourEntityMapper.toDomain(row) : null;
  }
}
```

---

## ğŸ”— Context Integration Patterns

### Pattern 1: Published Language (DTOs)

Each context exposes a **Public API** for other contexts to consume:

```typescript
// packages/integration/your-context-api/dto/your-entity.dto.ts
export interface YourEntityDTO {
  id: string;
  title: string;
  status: string;  // Simple string, not rich domain object
  priority: number | null;
  category: string;
  createdAt: Date;
}

export interface YourEntitySummaryDTO {
  totalEntities: number;
  activeEntities: number;
  successRate: number;
}
```

**Usage in Analytics Context:**

```typescript
// packages/analytics/application/queries/get-success-rate.query.ts
import type { YourEntitySummaryDTO } from "@monorepo-template/integration/your-context-api";

export class GetSuccessRateQuery {
  constructor(private readonly yourApi: YourApiClient) {}

  async execute(userId: string): Promise<number> {
    // Analytics context uses Your Context's public API (DTO)
    const summary = await this.yourApi.getSummary(userId);
    return summary.successRate;
  }
}
```

---

### Pattern 2: Domain Events (Asynchronous Integration)

Contexts communicate through events without direct coupling:

```typescript
// packages/your-context/domain/events/your-entity-created.event.ts
export class YourEntityCreatedEvent {
  constructor(
    public readonly yourEntityId: string,
    public readonly title: string,
    public readonly userId: string,
    public readonly occurredAt: Date = new Date(),
  ) {}
}

// packages/analytics/application/event-handlers/your-entity-created.handler.ts
export class OnYourEntityCreated {
  constructor(private readonly metricsRepo: IMetricsRepository) {}

  async handle(event: YourEntityCreatedEvent): Promise<void> {
    // Analytics context reacts to Your Context events
    await this.metricsRepo.incrementTotalEntities(event.userId);
  }
}
```

---

### Pattern 3: Anti-Corruption Layer (ACL)

Protect your context from external models:

```typescript
// packages/analytics/infrastructure/anti-corruption/your-context-adapter.ts
import type { YourEntityDTO } from "@monorepo-template/integration/your-context-api";
import { EntityMetric } from "@monorepo-template/analytics/domain";

export class YourContextAdapter {
  // Translate external DTO to Analytics domain model
  toDomain(dto: YourEntityDTO): EntityMetric {
    return new EntityMetric({
      entityId: dto.id,
      wasSuccessful: dto.status === "completed",
      duration: this.calculateDuration(dto),
    });
  }

  private calculateDuration(dto: YourEntityDTO): number {
    // Analytics-specific calculation
    return 0; // Simplified
  }
}
```

---

## ğŸ“‹ Package.json Per Context

### Your Context Package

```json
// packages/your-context/package.json
{
  "name": "@monorepo-template/your-context",
  "version": "1.0.0",
  "type": "module",
  "exports": {
    "./domain": "./domain/index.ts",
    "./application": "./application/index.ts",
    "./infrastructure": "./infrastructure/index.ts"
  },
  "dependencies": {
    "@monorepo-template/shared-kernel": "workspace:*",
    "@monorepo-template/database": "workspace:*",
    "zod": "catalog:"
  },
  "devDependencies": {
    "typescript": "^5",
    "vitest": "catalog:"
  }
}
```

---

### Analytics Context Package

```json
// packages/analytics/package.json
{
  "name": "@monorepo-template/analytics",
  "version": "1.0.0",
  "type": "module",
  "exports": {
    "./domain": "./domain/index.ts",
    "./application": "./application/index.ts"
  },
  "dependencies": {
    "@monorepo-template/shared-kernel": "workspace:*",
    "@monorepo-template/integration": "workspace:*",  // â† Uses context API
    "zod": "catalog:"
  }
}
```

---

### Integration Package

```json
// packages/integration/package.json
{
  "name": "@monorepo-template/integration",
  "version": "1.0.0",
  "type": "module",
  "exports": {
    "./your-context-api": "./your-context-api/index.ts",
    "./analytics-api": "./analytics-api/index.ts"
  },
  "dependencies": {
    "@monorepo-template/shared-kernel": "workspace:*"
  }
}
```

---

## ğŸ¯ Dependency Rules

### âœ… Allowed Dependencies

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Application Layer                   â”‚
â”‚   â†“ can use                         â”‚
â”‚ Domain Layer                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
      â†‘ implements
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Infrastructure Layer                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

All layers can use: Shared Kernel
```

**Valid:**

```typescript
// Application uses Domain âœ…
import { YourEntity } from "@monorepo-template/your-context/domain";

// Infrastructure implements Domain âœ…
import type { IYourEntityRepository } from "@monorepo-template/your-context/domain";

// All use Shared Kernel âœ…
import { Currency } from "@monorepo-template/shared-kernel";
```

---

### âŒ Forbidden Dependencies

```
Domain â†’ Application âŒ
Domain â†’ Infrastructure âŒ
Context A â†’ Context B (directly) âŒ
```

**Invalid:**

```typescript
// Domain CANNOT use Application âŒ
import { CreateYourEntityHandler } from "@monorepo-template/your-context/application";

// Domain CANNOT use Infrastructure âŒ
import { YourEntityRepositoryDrizzle } from "@monorepo-template/your-context/infrastructure";

// Your Context CANNOT directly use Analytics âŒ
import { MetricsService } from "@monorepo-template/analytics/domain";
```

---

### âœ… Context-to-Context Communication

Use integration packages:

```typescript
// Analytics using Your Context's public API âœ…
import type { YourEntityDTO } from "@monorepo-template/integration/your-context-api";

// Billing subscribing to Your Context events âœ…
import type { YourEntityCreatedEvent } from "@monorepo-template/integration/your-context-api/events";
```

---

## ğŸš€ Real-World Example: Multiple Contexts

### Scenario: User Creates an Entity

**Flow across contexts:**

1. **Your Context** - Create entity
2. **Analytics Context** - Update metrics
3. **Billing Context** - Check usage limits

```typescript
// 1. User action in frontend
// apps/web/src/routes/your-entities/create.tsx
const createEntity = async (data: CreateYourEntityInput) => {
  // Calls Your Context API
  const result = await api.yourContext.createEntity(data);
  return result;
};

// 2. Your context handles creation
// packages/your-context/application/use-cases/create-your-entity/handler.ts
export class CreateYourEntityHandler {
  async execute(command: CreateYourEntityCommand): Promise<string> {
    const entity = YourEntity.create(command);
    await this.repo.save(entity);

    // Publish event (other contexts can listen)
    await this.eventBus.publish(
      new YourEntityCreatedEvent(entity.id, command.userId)
    );

    return entity.id;
  }
}

// 3. Analytics context reacts to event
// packages/analytics/application/event-handlers/on-your-entity-created.ts
export class OnYourEntityCreated {
  async handle(event: YourEntityCreatedEvent): Promise<void> {
    // Update analytics metrics
    await this.metricsRepo.incrementEntityCount(event.userId);
  }
}

// 4. Billing context reacts to event
// packages/billing/application/event-handlers/on-your-entity-created.ts
export class OnYourEntityCreatedForBilling {
  async handle(event: YourEntityCreatedEvent): Promise<void> {
    // Check usage limits
    const subscription = await this.subscriptionRepo.findByUserId(event.userId);

    if (subscription.hasExceededLimit()) {
      // Send notification
      await this.notificationService.sendLimitWarning(event.userId);
    }
  }
}
```

---

## ğŸ“Š Context Mapping

Visual representation of context relationships:

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     Shared Kernel                            â”‚
â”‚  (Currency, Result, ApiResponse, Pagination)                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â†‘ uses
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚                   â”‚                   â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Your Context  â”‚  â”‚Analytics Contextâ”‚  â”‚ Billing Contextâ”‚
â”‚                â”‚  â”‚                 â”‚  â”‚                â”‚
â”‚ â€¢ Entities     â”‚  â”‚ â€¢ Metrics       â”‚  â”‚ â€¢ Subscriptionsâ”‚
â”‚ â€¢ Comments     â”‚  â”‚ â€¢ Reports       â”‚  â”‚ â€¢ Payments     â”‚
â”‚ â€¢ Workflows    â”‚  â”‚ â€¢ Dashboards    â”‚  â”‚ â€¢ Usage        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚                   â”‚                     â”‚
         â”‚    publishes      â”‚      listens        â”‚
         â”‚    events         â”‚      to events      â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚  Integration   â”‚
                    â”‚  (Event Bus)   â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ’¡ Best Practices

### 1. Keep Contexts Small and Focused

```bash
âœ… Good: @monorepo-template/your-context (single responsibility)
âŒ Bad: @monorepo-template/your-context-analytics-billing (mixed concerns)
```

### 2. Use Explicit Boundaries

```typescript
// âœ… Clear boundary - context exports only domain
export * from "./domain";
export * from "./application";

// âŒ Unclear - exporting everything
export * from "./domain";
export * from "./infrastructure";  // Leaking implementation details
```

### 3. Version Your Integration APIs

```typescript
// packages/integration/your-context-api/v1/
export interface YourEntityDTO_V1 { /* ... */ }

// packages/integration/your-context-api/v2/
export interface YourEntityDTO_V2 { /* ... */ }
```

### 4. Test Contexts Independently

```typescript
// packages/your-context/domain/__tests__/your-entity.test.ts
describe("YourEntity", () => {
  it("should transition to active status", () => {
    const entity = YourEntity.create({ title: "Example" });
    entity.updateStatus(YourEntityStatus.active());
    expect(entity.status).toBe(YourEntityStatus.active());
  });
});
```

---

## ğŸ¯ Migration Strategy

### Phase 1: Single Context (Current)

```
packages/domain/  â† All business logic here
packages/database/  â† All infrastructure
```

### Phase 2: Extract Shared Kernel

```
packages/shared-kernel/  â† Generic primitives
packages/domain/  â† Rename to your-context later
packages/database/
```

### Phase 3: Add Second Context

```
packages/shared-kernel/
packages/your-context/  â† Renamed from domain
packages/analytics/  â† New context
packages/database/
```

### Phase 4: Full Multi-Context

```
packages/shared-kernel/
packages/your-context/
packages/analytics/
packages/billing/
packages/integration/  â† Context APIs
packages/database/
```

---

## ğŸ”— Related Documentation

- [Shared Kernel & Bounded Contexts](/docs/architecture/shared-kernel-and-bounded-contexts)
- [Shared Kernel Implementation Guide](/docs/architecture/shared-kernel-implementation-guide)
- [Repository Pattern](/docs/architecture/repository-pattern)
- [Application Services](/docs/architecture/application-services)

---

_Last Updated: {new Date().toISOString().split('T')[0]}_
