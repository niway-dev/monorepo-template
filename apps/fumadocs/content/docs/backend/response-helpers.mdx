---
title: Response Helpers
description: Helper functions for creating standardized API responses
---

# Response Helpers

## Overview

Response helpers provide convenient functions for creating standardized API responses. These helpers ensure all responses follow the `ApiResponse<T>` format and use proper HTTP status codes.

## Why Use Response Helpers?

1. **Consistency**: All responses use the same structure automatically
2. **Less Boilerplate**: Reduces repetitive response creation code
3. **Type Safety**: TypeScript ensures correct response types
4. **Proper Status Codes**: Automatically uses correct HTTP status codes

## Helper Functions

### `successBody<T>(data: T): ApiResponse<T>`

Creates a success response body (200 OK).

```typescript
import { successBody } from "../utils/response-helpers";

// In route handler
return successBody(user);
```

### `createdBody<T>(data: T): ApiResponse<T>`

Creates a created response body (201 Created). Use for POST endpoints.

```typescript
import { createdBody } from "../utils/response-helpers";

// In route handler
const [created] = await db.insert(users).values(newUser).returning();
return status(201, createdBody(created));
```

### `successWithPaginationBody<T>(data: T[], pagination: PaginationResult, total: number): ApiResponse<T[]>`

Creates a paginated success response.

```typescript
import { successWithPaginationBody, getPaginationParams } from "../utils/response-helpers";

const pagination = getPaginationParams(query);
const items = await db.select().from(items)
  .limit(pagination.limit)
  .offset(pagination.offset);

const [{ count }] = await db.select({ count: sql`count(*)` }).from(items);
const total = Number(count);

return status(200, successWithPaginationBody(items, pagination, total));
```

### `errorBody(message: string): ApiResponse<never>`

Creates an error response body. Used in error handlers.

```typescript
import { errorBody } from "../utils/response-helpers";

// In error handler
.onError(({ code, error, set }) => {
  if (code === "NotFoundError") {
    set.status = 404;
    return errorBody(error.message);
  }
})
```

### `getPaginationParams(query: PaginationParams): PaginationResult`

Calculates pagination values from query parameters.

```typescript
import { getPaginationParams } from "../utils/response-helpers";

const pagination = getPaginationParams(query);
// Returns: { page: 1, limit: 10, offset: 0 }
```

## Usage Examples

### GET - Single Item

```typescript
.get("/:id", async ({ params, status }) => {
  const user = await getUser(params.id);
  return status(200, successBody(user));
})
```

### GET - List with Pagination

```typescript
.get("/", async ({ query, status }) => {
  const pagination = getPaginationParams(query);

  const items = await db.select().from(items)
    .limit(pagination.limit)
    .offset(pagination.offset);

  const total = await getTotalCount();

  return status(200, successWithPaginationBody(items, pagination, total));
})
```

### POST - Create

```typescript
.post("/", async ({ body, status }) => {
  const [created] = await db.insert(items).values(body).returning();
  return status(201, createdBody(created));
})
```

### PUT - Update

```typescript
.put("/:id", async ({ params, body, status }) => {
  const [updated] = await db.update(items)
    .set(body)
    .where(eq(items.id, params.id))
    .returning();

  return status(200, successBody(updated));
})
```

### DELETE - Delete

```typescript
.delete("/:id", async ({ params, set }) => {
  await db.delete(items).where(eq(items.id, params.id));
  set.status = 204; // No Content
})
```

## Error Handler Usage

```typescript
.onError(({ code, error, set }) => {
  if (code === "UnauthorizedError") {
    set.status = 401;
    return errorBody(error.message);
  }
  if (code === "NotFoundError") {
    set.status = 404;
    return errorBody(error.message);
  }
  if (code === "BadRequestError") {
    set.status = 400;
    return errorBody(error.message);
  }
  // Default
  set.status = 500;
  return errorBody("Internal server error");
})
```

## HTTP Status Codes

- **200 OK**: `successBody()` - Successful GET, PUT requests
- **201 Created**: `createdBody()` - Successful POST requests
- **204 No Content**: `set.status = 204` - Successful DELETE requests
- **400 Bad Request**: `errorBody()` - Validation errors
- **401 Unauthorized**: `errorBody()` - Authentication required
- **404 Not Found**: `errorBody()` - Resource not found
- **500 Internal Server Error**: `errorBody()` - Server errors

## See Also

- [API Response Types](/docs/backend/api-response-types) - Response structure documentation
- [Error Handlers](/docs/backend/error-handlers) - Error handling utilities
